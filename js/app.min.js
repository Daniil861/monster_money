(()=>{"use strict";let s=!1;setTimeout((()=>{if(s){let s=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(s)}))}}),0),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)})),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible"));const t=document.querySelector(".preloader"),e=document.querySelector(".wrapper");document.addEventListener("click",(s=>{let a=s.target;a.closest(".acces-preloader__button")&&(t.classList.add("_hide"),sessionStorage.setItem("preloader",!0),e.classList.add("_visible")),a.closest(".controls__button_left")&&function(){o[l].classList.remove("pac-man"),l%c==0||o[l-1].classList.contains("wall")||o[l-1].classList.contains("ghost-lair")||(l-=1);o[l].classList.add("pac-man"),i()}(),a.closest(".controls__button_top")&&function(){o[l].classList.remove("pac-man"),l-c>=0&&!o[l-c].classList.contains("wall")&&!o[l-c].classList.contains("ghost-lair")&&(l-=c);o[l].classList.add("pac-man"),i()}(),a.closest(".controls__button_right")&&function(){o[l].classList.remove("pac-man"),l%c<26&&!o[l+1].classList.contains("wall")&&!o[l+1].classList.contains("ghost-lair")&&(l+=1);o[l].classList.add("pac-man"),i()}(),a.closest(".controls__button_bottom")&&function(){o[l].classList.remove("pac-man"),l+c<729&&!o[l+c].classList.contains("wall")&&!o[l+c].classList.contains("ghost-lair")&&(l+=c);o[l].classList.add("pac-man"),i()}()}));const a=document.querySelector(".game__grid"),c=27,n=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,1,1,1,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,0,1,1,1,0,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,0,1,1,1,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,3,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],o=[];!function(){for(let s=0;s<n.length;s++){const t=document.createElement("div");a.appendChild(t),o.push(t),0==n[s]?o[s].classList.add("pac-dot"):1==n[s]?o[s].classList.add("wall"):2==n[s]?o[s].classList.add("ghost-lair"):3==n[s]&&o[s].classList.add("power-pellet")}}();let l=418;function i(){r(),d(),m()}function r(){o[l].classList.contains("pac-dot")&&o[l].classList.remove("pac-dot")}function d(){o[l].classList.contains("power-pellet")&&(L.forEach((s=>s.isScared=!0)),setTimeout((()=>{L.forEach((s=>s.isScared=!1))}),1e4),o[l].classList.remove("power-pellet"))}o[l].classList.add("pac-man"),document.addEventListener("keyup",(function(s){switch(o[l].classList.remove("pac-man"),console.log(s.keyCode),s.keyCode){case 37:l%c==0||o[l-1].classList.contains("wall")||o[l-1].classList.contains("ghost-lair")||(l-=1);break;case 38:l-c>=0&&!o[l-c].classList.contains("wall")&&!o[l-c].classList.contains("ghost-lair")&&(l-=c);break;case 39:l%c<26&&!o[l+1].classList.contains("wall")&&!o[l+1].classList.contains("ghost-lair")&&(l+=1);break;case 40:l+c<729&&!o[l+c].classList.contains("wall")&&!o[l+c].classList.contains("ghost-lair")&&(l+=c)}o[l].classList.add("pac-man"),r(),d(),m(),console.log(l)}));class u{constructor(s,t,e){this.className=s,this.startIndex=t,this.speed=e,this.currentIndex=t,this.timerId=NaN,this.isScared=!1}}let L=[new u("blinky",252,250),new u("pinky",29,400),new u("inky",500,300),new u("clyde",535,500)];function m(){o[l].classList.contains("ghost")&&!o[l].classList.contains("scared-ghost")&&L.forEach((s=>clearInterval(s.timerId)))}L.forEach((s=>{o[s.currentIndex].classList.add(s.className),o[s.currentIndex].classList.add("ghost")})),L.forEach((s=>function(s){const t=[-1,1,c,-27];let e=t[Math.floor(Math.random()*(t.length-0)+0)];s.timerId=setInterval((function(){o[s.currentIndex+e].classList.contains("wall")||o[s.currentIndex+e].classList.contains("ghost")?e=t[Math.floor(Math.random()*(t.length-0)+0)]:(o[s.currentIndex].classList.remove(s.className,"ghost","scared-ghost"),s.currentIndex+=e,o[s.currentIndex].classList.add(s.className,"ghost")),s.isScared&&o[s.currentIndex].classList.add("scared-ghost"),s.isScared&&o[s.currentIndex].classList.contains("pac-man")&&(o[s.currentIndex].classList.remove(s.className,"ghost","scared-ghost"),s.currentIndex=s.startIndex,o[s.currentIndex].classList.add(s.className,"ghost"))}),s.speed)}(s))),window.FLS=!0,function(s){let t=new Image;t.onload=t.onerror=function(){s(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(s){let t=!0===s?"webp":"no-webp";document.documentElement.classList.add(t)}))})();